# --------- 基础输入 ----------
ply_path: "bottle.ply"     # 你的数据路径

# --------- 训练超参 ----------
batch_size: 64
num_epochs: 2000
activation_cfg: [ "TanH", "TanH" ]

model:
  inner_dim: 512
  input_dim: 3
  output_dim: 1

optim:
  lr: 1.0e-4
  weight_decay: 0.0
  eps: 1.0e-14

scheduler:
  mode: "min"
  factor: 0.9
  patience: 20
  threshold: 1.0e-4
  threshold_mode: "rel"
  up_factor: 1.1
  up_patience: 30
  eps: 1.0e-14

# --------- 数据/采样 ----------
remeshing: true                  # 读取 PLY 时进行密封重建
bbox_expand_ratio: 1.2           # AABB 放大比例（归一化坐标系下）
sample_num_bounding: 100000      # AABB 内采样点数
kdtree_leafsize: 32

# --------- 可视化开关 ----------
viz:
  enable_2d: true
  enable_3d: true

  # 2D 截面参数（plot_model_slice）
  slice_axis: "z"                # "x" | "y" | "z"
  slice_value: 0.0               # 固定截面位置（单位：归一化坐标）
  slice_res: 256                 # 采样分辨率
  slice_level: 0.0               # 颜色映射居中（白色）对应值
  slice_cmap: "RdBu_r"
  slice_symmetric: true          # 是否根据数据自动对称色条

  # 3D 等值面参数（pyrfm Monte Carlo）
  iso_level: 0.0
  iso_grid: [ 128, 128, 128 ]
  iso_resolution: [ 800, 800 ]
  iso_view: "top"              # 'front' | 'back' | 'left' | 'right' | 'top' | 'bottom'

# --------- 产出/存储 ----------
resume: false                   # 断点恢复
load_best_for_plot: false
out:
  checkpoints_dir: "checkpoints"
  renders_dir: "renders"         # 将在其下按 tag 分子目录：renders/relu-tanh/...

# 触发保存的频率控制
save_every_best: 10              # 每出现 N 次新的 best 就保存 2D & 3D
save_every_epoch: 0              # 每 N 个 epoch 保存一次（0 表示关闭）

# --------- 日志输出 ----------
logging:
  dir: "logs"           # 日志根目录，具体会落到 logs/<tag>/ 下
  level: "INFO"         # DEBUG / INFO / WARNING / ERROR
  also_print: true      # 同时打印到控制台
  filename_prefix: "train"   # 日志文件名前缀
  timestamp_in_name: true    # 文件名里带时间戳
